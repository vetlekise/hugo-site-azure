<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Learn how to manage Terraform state in an Azure Storage backend by building a GitHub Actions pipeline with OIDC authentication, which eliminates the need for long-lived secrets.">
<title>Eliminate Secrets From Your Terraform Azure Backend</title>

<link rel='canonical' href='http://localhost:1313/post/terraform-github-actions-oidc/'>

<link rel="stylesheet" href="/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css"><meta property='og:title' content="Eliminate Secrets From Your Terraform Azure Backend">
<meta property='og:description' content="Learn how to manage Terraform state in an Azure Storage backend by building a GitHub Actions pipeline with OIDC authentication, which eliminates the need for long-lived secrets.">
<meta property='og:url' content='http://localhost:1313/post/terraform-github-actions-oidc/'>
<meta property='og:site_name' content='Vetle&#39;s Tech Chronicles'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-10-05T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-10-05T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="Eliminate Secrets From Your Terraform Azure Backend">
<meta name="twitter:description" content="Learn how to manage Terraform state in an Azure Storage backend by building a GitHub Actions pipeline with OIDC authentication, which eliminates the need for long-lived secrets.">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_325fee3f64c1ca66.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Vetle&#39;s Tech Chronicles</a></h1>
            <h2 class="site-description">A blog about technology, tutorials, and my thoughts.</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/vetlekise'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://linkedin.com/in/vetlekise'
                        target="_blank"
                        title="LinkedIn"
                        rel="me"
                    >
                        
                        
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 4m0 2a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2z"></path><path d="M8 11v5"></path><path d="M8 8v.01"></path><path d="M12 16v-5"></path><path d="M16 16v-3a2 2 0 00-4 0"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#prerequisites">Prerequisites</a></li>
    <li><a href="#azure-resources">Azure Resources</a></li>
    <li><a href="#service-principal">Service Principal</a></li>
    <li><a href="#github-secrets">GitHub Secrets</a></li>
    <li><a href="#terraform-and-github-actions-configuration">Terraform and GitHub Actions Configuration</a></li>
    <li><a href="#workflow">Workflow</a></li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/how-to/" >
                How-To
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/terraform-github-actions-oidc/">Eliminate Secrets From Your Terraform Azure Backend</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            Learn how to manage Terraform state in an Azure Storage backend by building a GitHub Actions pipeline with OIDC authentication, which eliminates the need for long-lived secrets.
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Oct 05, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    3 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor"></a>Prerequisites
</h2><p>Before you begin, ensure you have the following set up.</p>
<ul>
<li>A <strong>GitHub repository</strong> must already be created.</li>
<li>An <strong>Azure</strong> account with an active subscription. Make sure it has the Entra ID role <code>Application Administrator</code>, and Azure <code>Owner</code> role on the subscription.</li>
<li><strong>Locally installed tools</strong>: Git, Azure CLI, and a code editor.</li>
</ul>
<h2 id="azure-resources"><a href="#azure-resources" class="header-anchor"></a>Azure Resources
</h2><p>We need to create a few Azure resources, specifically a <strong>Resource Group</strong> containing a <strong>Storage Account</strong>. This will store our Terraform state file securely and offer state locking. The below <strong>Azure CLI</strong> script will create these resources for us, you just need to provide some values first. You&rsquo;ll be prompted to login with your <strong>Azure</strong> account, use the one that has access to create resources in your desired Subscription.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Login with your Azure account</span>
</span></span><span class="line"><span class="cl">az login
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">RESOURCE_GROUP_NAME</span><span class="o">=</span><span class="s2">&#34;terraform&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">STORAGE_ACCOUNT_NAME</span><span class="o">=</span><span class="s2">&#34;tfstate&lt;INSERT RANDOM NUMBERS&gt;&#34;</span> <span class="c1"># must be globally unique&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">CONTAINER_NAME</span><span class="o">=</span><span class="s2">&#34;tfstate&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">LOCATION</span><span class="o">=</span><span class="s2">&#34;&#34;</span> <span class="c1"># e.g. &#34;eastus&#34; or &#34;westeurope&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create the resource group</span>
</span></span><span class="line"><span class="cl">az group create --name <span class="nv">$RESOURCE_GROUP_NAME</span> --location <span class="nv">$LOCATION</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create the storage account</span>
</span></span><span class="line"><span class="cl">az storage account create --name <span class="nv">$STORAGE_ACCOUNT_NAME</span> --resource-group <span class="nv">$RESOURCE_GROUP_NAME</span> --sku Standard_LRS --encryption-services blob
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create a blob container within the storage account</span>
</span></span><span class="line"><span class="cl">az storage container create --name <span class="nv">$CONTAINER_NAME</span> --account-name <span class="nv">$STORAGE_ACCOUNT_NAME</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="service-principal"><a href="#service-principal" class="header-anchor"></a>Service Principal
</h2><p>For the pipeline to authenticate, we need to create a <strong>Service Principal</strong> in <strong>Entra ID</strong>. The script creates this for us, in addition to that, it creates the <strong>federated tokens</strong> needed for GitHub Actions authenticate to Azure, and it also creates a couple of <strong>RBAC assignments</strong> needed for Terraform to manage the state file and create resources. Before running, remember to edit the variables at the top! (You should already be logged in from the previous script)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">APP_NAME</span><span class="o">=</span><span class="s2">&#34;GitHub Actions - OIDC&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">YOUR_GITHUB_ORG</span><span class="o">=</span><span class="s2">&#34;&#34;</span> <span class="c1"># e.g. &#34;my-github-username&#34; or &#34;my-github-organization&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">YOUR_REPO_NAME</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Get the necessary IDs</span>
</span></span><span class="line"><span class="cl"><span class="nv">AZURE_SUBSCRIPTION_ID</span><span class="o">=</span><span class="k">$(</span>az account show --query id -o tsv<span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">AZURE_CLIENT_ID</span><span class="o">=</span><span class="k">$(</span>az ad app create --display-name <span class="s2">&#34;</span><span class="nv">$APP_NAME</span><span class="s2">&#34;</span> --query appId -o tsv<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create the Service Principal for the new App</span>
</span></span><span class="line"><span class="cl">az ad sp create --id <span class="nv">$AZURE_CLIENT_ID</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Grant the Service Principal read and write permission over your subscription control plane</span>
</span></span><span class="line"><span class="cl">az role assignment create <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --role <span class="s2">&#34;Contributor&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --assignee-object-id <span class="k">$(</span>az ad sp show --id <span class="nv">$AZURE_CLIENT_ID</span> --query id -o tsv<span class="k">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --assignee-principal-type ServicePrincipal <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --scope <span class="s2">&#34;/subscriptions/</span><span class="nv">$AZURE_SUBSCRIPTION_ID</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Grant the Service Principal read and write permission over your storage account data plane</span>
</span></span><span class="line"><span class="cl">az role assignment create <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --role <span class="s2">&#34;Storage Blob Data Contributor&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --assignee-object-id <span class="k">$(</span>az ad sp show --id <span class="nv">$AZURE_CLIENT_ID</span> --query id -o tsv<span class="k">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --assignee-principal-type ServicePrincipal <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --scope <span class="s2">&#34;/subscriptions/</span><span class="nv">$AZURE_SUBSCRIPTION_ID</span><span class="s2">/resourceGroups/</span><span class="nv">$RESOURCE_GROUP_NAME</span><span class="s2">/providers/Microsoft.Storage/storageAccounts/</span><span class="nv">$STORAGE_ACCOUNT_NAME</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Create the federated credential trust between your Service Principal and GitHub</span>
</span></span><span class="line"><span class="cl">az ad app federated-credential create <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --id <span class="nv">$AZURE_CLIENT_ID</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --parameters <span class="s1">&#39;{&#34;name&#34;:&#34;github-main-branch&#34;,&#34;issuer&#34;:&#34;https://token.actions.githubusercontent.com&#34;,&#34;subject&#34;:&#34;repo:&#39;</span><span class="nv">$YOUR_GITHUB_ORG</span><span class="s1">&#39;/&#39;</span><span class="nv">$YOUR_REPO_NAME</span><span class="s1">&#39;:ref:refs/heads/main&#34;,&#34;description&#34;:&#34;Trust main branch&#34;,&#34;audiences&#34;:[&#34;api://AzureADTokenExchange&#34;]}&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">az ad app federated-credential create <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --id <span class="nv">$AZURE_CLIENT_ID</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --parameters <span class="s1">&#39;{&#34;name&#34;:&#34;github-pull-requests&#34;,&#34;issuer&#34;:&#34;https://token.actions.githubusercontent.com&#34;,&#34;subject&#34;:&#34;repo:&#39;</span><span class="nv">$YOUR_GITHUB_ORG</span><span class="s1">&#39;/&#39;</span><span class="nv">$YOUR_REPO_NAME</span><span class="s1">&#39;:pull_request&#34;,&#34;description&#34;:&#34;Trust pull requests&#34;,&#34;audiences&#34;:[&#34;api://AzureADTokenExchange&#34;]}&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># You will need the following values for your GitHub secrets:</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;AZURE_CLIENT_ID: </span><span class="nv">$AZURE_CLIENT_ID</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;AZURE_TENANT_ID: </span><span class="k">$(</span>az account show --query tenantId -o tsv<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;AZURE_SUBSCRIPTION_ID: </span><span class="nv">$AZURE_SUBSCRIPTION_ID</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Save the values echo&rsquo;d after the script is finished. These will be used later to</p>
<h2 id="github-secrets"><a href="#github-secrets" class="header-anchor"></a>GitHub Secrets
</h2><ol>
<li>In your repository settings, go to <code>Secrets and variables</code> &gt; <code>Actions</code>.</li>
<li>Create the following secrets using the values from the Service Principal script output:
<ul>
<li><code>AZURE_CLIENT_ID</code></li>
<li><code>AZURE_SUBSCRIPTION_ID</code></li>
<li><code>AZURE_TENANT_ID</code></li>
</ul>
</li>
</ol>
<h2 id="terraform-and-github-actions-configuration"><a href="#terraform-and-github-actions-configuration" class="header-anchor"></a>Terraform and GitHub Actions Configuration
</h2><h2 id="workflow"><a href="#workflow" class="header-anchor"></a>Workflow
</h2>
</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/post/multi-environment-iac/">
        
        

        <div class="article-details">
            <h2 class="article-title">Manage Multiple Terraform Environments</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/develop-terraform-modules/">
        
        

        <div class="article-details">
            <h2 class="article-title">Develop Terraform Modules With Documentation and Versioning</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/ansible-proxmox-inventory/">
        
        

        <div class="article-details">
            <h2 class="article-title">Setup Ansible With a Dynamic Proxmox Inventory</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/terraform-drift-reconcile-pipeline/">
        
        

        <div class="article-details">
            <h2 class="article-title">Setup a Terraform State Drift Reconciliation Pipeline With GitHub Actions</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/genai-certification-study/">
        
        

        <div class="article-details">
            <h2 class="article-title">Ace Your IT Certification with Generative AI</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 Vetle&#39;s Tech Chronicles
    </section>
    
    <section class="powerby">
        
            All opinions are my own. <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.31.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.e37a1c77e9f793cd8619172a944d78c1066956c7d5cd59e9bd51bd3e348898ea.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
